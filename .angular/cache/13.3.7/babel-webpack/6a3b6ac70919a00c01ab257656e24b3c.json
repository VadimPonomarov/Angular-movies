{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../../../services\";\nimport * as i3 from \"../../pagination/pagination.component\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../main-page-card/main-page-card.component\";\n\nfunction MoviesComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"app-main-page-card\", 4);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const movie_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"movie\", movie_r1);\n  }\n}\n\nexport class MoviesComponent {\n  constructor(_activatedRoute, _apiServise, _store) {\n    this._activatedRoute = _activatedRoute;\n    this._apiServise = _apiServise;\n    this._store = _store;\n    this.curPage = 1;\n    this.currentMovieList = [];\n\n    this._activatedRoute.url.subscribe(urlSegment => {\n      const category = urlSegment[0].path;\n      this.setCurCategory(category);\n\n      this._apiServise.getMoviesByCategory(this.curCategory, this.curPage).subscribe(movies => {\n        this.storeMovieResponce(movies, this.curCategory);\n      });\n    });\n\n    this._store.refreshMovies.subscribe(() => {\n      this._apiServise.getMoviesByCategory(this.curCategory, this.curPage).subscribe(movies => {\n        this.storeMovieResponce(movies, this.curCategory);\n        this.getCurMovieListByPage(this.curPage, this.curCategory);\n      });\n    });\n  }\n\n  setCurCategory(category) {\n    this.curCategory = category;\n  }\n\n  setCurPage(page) {\n    this.curPage = page;\n  }\n\n  storeMovieResponce(imovieResponce, curCategory) {\n    this._store.saveMovieResponce(imovieResponce, curCategory);\n  }\n\n  getCurMovieListByPage(page, curCategory) {\n    this.currentMovieList = this._store.getMovieList(page, curCategory);\n  }\n\n  handleChangePage(page) {\n    this.setCurPage(page);\n    this.getCurMovieListByPage(this.curPage, this.curCategory);\n  }\n\n}\n\nMoviesComponent.ɵfac = function MoviesComponent_Factory(t) {\n  return new (t || MoviesComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i2.StorageService));\n};\n\nMoviesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MoviesComponent,\n  selectors: [[\"app-movies\"]],\n  decls: 4,\n  vars: 4,\n  consts: [[3, \"curCategory\", \"changeCurPage\"], [1, \"d-flex\", \"flex-wrap\"], [\"class\", \"col-12 col-md-6 col-lg-4 col-xl-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-12\", \"col-md-6\", \"col-lg-4\", \"col-xl-3\"], [3, \"movie\"]],\n  template: function MoviesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"app-pagination\", 0);\n      i0.ɵɵlistener(\"changeCurPage\", function MoviesComponent_Template_app_pagination_changeCurPage_0_listener($event) {\n        return ctx.handleChangePage($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵtemplate(2, MoviesComponent_div_2_Template, 2, 1, \"div\", 2);\n      i0.ɵɵpipe(3, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"curCategory\", ctx.curCategory);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(3, 2, ctx.currentMovieList));\n    }\n  },\n  directives: [i3.PaginationComponent, i4.NgForOf, i5.MainPageCardComponent],\n  pipes: [i4.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJtb3ZpZXMuY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"sources":["D:/myDocuments/Обучение/Projects/Angular-movies/src/app/modules/movie/components/pages/movies/movies.component.ts"],"names":["i0","i1","i2","i3","i4","i5","MoviesComponent_div_2_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","movie_r1","$implicit","ɵɵadvance","ɵɵproperty","MoviesComponent","constructor","_activatedRoute","_apiServise","_store","curPage","currentMovieList","url","subscribe","urlSegment","category","path","setCurCategory","getMoviesByCategory","curCategory","movies","storeMovieResponce","refreshMovies","getCurMovieListByPage","setCurPage","page","imovieResponce","saveMovieResponce","getMovieList","handleChangePage","ɵfac","MoviesComponent_Factory","t","ɵɵdirectiveInject","ActivatedRoute","ApiService","StorageService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","MoviesComponent_Template","ɵɵlistener","MoviesComponent_Template_app_pagination_changeCurPage_0_listener","$event","ɵɵtemplate","ɵɵpipe","ɵɵpipeBind1","directives","PaginationComponent","NgForOf","MainPageCardComponent","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/router\";\r\nimport * as i2 from \"../../../../../services\";\r\nimport * as i3 from \"../../pagination/pagination.component\";\r\nimport * as i4 from \"@angular/common\";\r\nimport * as i5 from \"../../main-page-card/main-page-card.component\";\r\nfunction MoviesComponent_div_2_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 3);\r\n    i0.ɵɵelement(1, \"app-main-page-card\", 4);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const movie_r1 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"movie\", movie_r1);\r\n} }\r\nexport class MoviesComponent {\r\n    constructor(_activatedRoute, _apiServise, _store) {\r\n        this._activatedRoute = _activatedRoute;\r\n        this._apiServise = _apiServise;\r\n        this._store = _store;\r\n        this.curPage = 1;\r\n        this.currentMovieList = [];\r\n        this._activatedRoute.url\r\n            .subscribe(urlSegment => {\r\n            const category = urlSegment[0].path;\r\n            this.setCurCategory(category);\r\n            this._apiServise.getMoviesByCategory(this.curCategory, this.curPage)\r\n                .subscribe(movies => {\r\n                this.storeMovieResponce(movies, this.curCategory);\r\n            });\r\n        });\r\n        this._store.refreshMovies.subscribe(() => {\r\n            this._apiServise.getMoviesByCategory(this.curCategory, this.curPage)\r\n                .subscribe(movies => {\r\n                this.storeMovieResponce(movies, this.curCategory);\r\n                this.getCurMovieListByPage(this.curPage, this.curCategory);\r\n            });\r\n        });\r\n    }\r\n    setCurCategory(category) {\r\n        this.curCategory = category;\r\n    }\r\n    setCurPage(page) {\r\n        this.curPage = page;\r\n    }\r\n    storeMovieResponce(imovieResponce, curCategory) {\r\n        this._store.saveMovieResponce(imovieResponce, curCategory);\r\n    }\r\n    getCurMovieListByPage(page, curCategory) {\r\n        this.currentMovieList = this._store.getMovieList(page, curCategory);\r\n    }\r\n    ;\r\n    handleChangePage(page) {\r\n        this.setCurPage(page);\r\n        this.getCurMovieListByPage(this.curPage, this.curCategory);\r\n    }\r\n}\r\nMoviesComponent.ɵfac = function MoviesComponent_Factory(t) { return new (t || MoviesComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i2.StorageService)); };\r\nMoviesComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: MoviesComponent, selectors: [[\"app-movies\"]], decls: 4, vars: 4, consts: [[3, \"curCategory\", \"changeCurPage\"], [1, \"d-flex\", \"flex-wrap\"], [\"class\", \"col-12 col-md-6 col-lg-4 col-xl-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-12\", \"col-md-6\", \"col-lg-4\", \"col-xl-3\"], [3, \"movie\"]], template: function MoviesComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"app-pagination\", 0);\r\n        i0.ɵɵlistener(\"changeCurPage\", function MoviesComponent_Template_app_pagination_changeCurPage_0_listener($event) { return ctx.handleChangePage($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵtemplate(2, MoviesComponent_div_2_Template, 2, 1, \"div\", 2);\r\n        i0.ɵɵpipe(3, \"async\");\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"curCategory\", ctx.curCategory);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(3, 2, ctx.currentMovieList));\r\n    } }, directives: [i3.PaginationComponent, i4.NgForOf, i5.MainPageCardComponent], pipes: [i4.AsyncPipe], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJtb3ZpZXMuY29tcG9uZW50LnNjc3MifQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}